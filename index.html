<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Casino Dealer Admin - Red Edition Final</title>
    <style>
        :root {
            --main-red: #AD2A1B;
            --dark-bg: #0f0f0f;
            --panel-bg: #1a1a1a;
            --card-white: #ffffff;
            --accent-green: #2ecc71;
            --text-main: #eeeeee;
        }

        body { 
            font-family: 'Segoe UI', 'Malgun Gothic', sans-serif; 
            background-color: var(--dark-bg); 
            color: var(--text-main); 
            margin: 0; 
            padding: 20px;
            line-height: 1.5;
        }

        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            background: var(--panel-bg); 
            padding: 30px; 
            border-radius: 24px; 
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            border: 1px solid rgba(173, 42, 27, 0.2);
        }

        h1 { 
            text-align: center; 
            color: var(--main-red); 
            text-transform: uppercase; 
            letter-spacing: 4px; 
            margin-bottom: 30px;
            font-size: 2em;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .game-selector { display: flex; gap: 12px; margin-bottom: 25px; }
        .btn-game { 
            flex: 1; padding: 15px; border: 2px solid var(--main-red); background: transparent; color: var(--main-red); 
            cursor: pointer; font-weight: bold; border-radius: 12px; transition: all 0.3s ease; font-size: 1.1em;
        }
        .btn-game.active { background: var(--main-red); color: #fff; box-shadow: 0 0 15px rgba(173, 42, 27, 0.4); }

        .controls { 
            background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px; text-align: center; 
            margin-bottom: 10px; display: flex; justify-content: center; align-items: center; gap: 15px;
        }
        
        .quick-copy-area {
            display: none; 
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 30px;
            padding: 0 10px;
        }
        .copy-box {
            background: #111;
            border: 1px solid #333;
            border-radius: 10px;
            padding: 12px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            transition: border 0.2s;
        }
        .copy-box:hover { border-color: var(--main-red); }
        .copy-box-text {
            font-size: 0.85em;
            color: #bbb;
            margin-bottom: 8px;
            word-break: keep-all;
            min-height: 40px;
        }
        .copy-box-btn {
            background: #333;
            color: #fff;
            border: none;
            padding: 6px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.75em;
            font-weight: bold;
        }
        .copy-box-btn:hover { background: var(--main-red); }

        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type="number"] { 
            -moz-appearance: textfield;
            padding: 10px; width: 60px; background: #000; border: 1px solid #444; color: #fff; border-radius: 8px; text-align: center; 
        }

        .shuffle-btn { padding: 12px 30px; background: var(--main-red); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; }
        .poker-settle-btn { padding: 12px 30px; background: var(--accent-green); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; display: none; }
        .clear-btn { padding: 12px 30px; background: #444; color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; }

        .game-board { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .player-slot { background: #222; padding: 20px; border-radius: 18px; border: 1px solid rgba(173, 42, 27, 0.3); }
        .winner-slot { border: 2px solid var(--main-red); background: #2a1a1a; }
        
        .player-header { border-bottom: 1px solid #333; padding-bottom: 12px; margin-bottom: 15px; font-weight: bold; color: var(--main-red); font-size: 1.2em; text-align: center; }
        .poker-name-input { background: transparent; border: 1px dashed #555; color: var(--main-red); font-weight: bold; text-align: center; width: 80%; }

        .card-display { display: flex; gap: 8px; justify-content: center; margin-bottom: 15px; min-height: 80px; align-items: center; }
        .card { 
            width: 50px; height: 75px; background: var(--card-white); border-radius: 6px; color: black; position: relative; font-weight: bold; 
            box-shadow: 0 4px 8px rgba(0,0,0,0.3); border: 1px solid #ddd;
        }
        .card.red { color: #d63031; }
        .card-suit { font-size: 22px; position: absolute; top: 52%; left: 50%; transform: translate(-50%, -50%); }
        .card-rank { font-size: 14px; position: absolute; top: 4px; left: 5px; }

        .copy-section { background: #000; padding: 12px; border-radius: 10px; margin: 10px 0; display: flex; align-items: center; border-left: 4px solid var(--main-red); }
        .result-text { font-family: 'Consolas', monospace; font-size: 0.9em; color: #ccc; white-space: pre-wrap; flex-grow: 1; }
        .copy-btn { background: var(--main-red); border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 0.8em; font-weight: bold; color: white; margin-left: 10px; }

        .footer-action { text-align: center; margin-top: 40px; padding: 30px; border-top: 1px solid #333; }
        .analyze-btn { padding: 18px 60px; background: var(--main-red); color: white; border: none; border-radius: 50px; font-size: 1.4em; font-weight: bold; cursor: pointer; }
        .winner-display-box { display: none; flex-direction: column; align-items: center; gap: 15px; background: #000; padding: 25px; border-radius: 20px; border: 2px solid var(--main-red); max-width: 700px; margin: 20px auto; }
        #winnerResultFullText { font-size: 1.2em; font-weight: bold; color: #fff; text-align: center; line-height: 1.7; }
        
        .round-container { border-top: 1px solid #333; padding-top: 10px; margin-top: 10px; }
        .round-container.folded { opacity: 0.25; filter: grayscale(1); }
        .round-label { font-size: 0.8em; color: var(--main-red); font-weight: bold; margin-bottom: 5px; display: block; }
        .bet-input-area { font-size: 0.85em; color: #888; display: flex; align-items: center; gap: 5px; }
        .bet-input { width: 50px; background: #000; border: 1px solid var(--main-red); color: #fff; text-align: right; border-radius: 3px; padding: 3px; }
    </style>
</head>
<body>

<div class="container">
    <h1><span id="displayGameName">GAME</span> DEALER PANEL</h1>
    <div class="game-selector">
        <button id="btn-HI-LO" class="btn-game" onclick="setGame('HI-LO')">í•˜ì´ ì•¤ ë¡œìš°</button>
        <button id="btn-RED-DOG" class="btn-game" onclick="setGame('RED-DOG')">ë ˆë“œ ë…</button>
        <button id="btn-POKER" class="btn-game" onclick="setGame('POKER')">í¬ì»¤</button>
    </div>

    <div class="controls">
        <span>í”Œë ˆì´ì–´ ìˆ˜: </span>
        <input type="number" id="playerCount" value="4" min="1" onchange="initPlayers()">
        <button class="shuffle-btn" onclick="dealCards()">CARD SHUFFLE</button>
        <button id="pokerSettleBtn" class="poker-settle-btn" onclick="settlePokerCards()">POKER LIVE ì •ì‚°</button>
        <button class="clear-btn" onclick="clearTable()">CLEAR TABLE</button>
    </div>

    <div id="pokerQuickCopy" class="quick-copy-area">
        <div class="copy-box">
            <div class="copy-box-text" id="phrase1">ì§€ê¸ˆë¶€í„° í¬ì»¤ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. ì•„ë˜ë¡œ ì (.)ì„ ë‚¨ê²¨ ìˆœì„œë¥¼ ì •í•´ ì£¼ì„¸ìš”.</div>
            <button class="copy-box-btn" onclick="copyPhrase('phrase1')">ë©˜íŠ¸ 1 ë³µì‚¬</button>
        </div>
        <div class="copy-box">
            <div class="copy-box-text" id="phrase2">ì¹´ë“œ ë°°ë¶€ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. ëª¨ë‘ ëŒ€ê¸°í•´ ì£¼ì„¸ìš”.</div>
            <button class="copy-box-btn" onclick="copyPhrase('phrase2')">ë©˜íŠ¸ 2 ë³µì‚¬</button>
        </div>
        <div class="copy-box">
            <div class="copy-box-text" id="phrase3">ì¹´ë“œ ë°°ë¶€ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë°°íŒ…ì„ ì‹œì‘í•©ë‹ˆë‹¤.</div>
            <button class="copy-box-btn" onclick="copyPhrase('phrase3')">ë©˜íŠ¸ 3 ë³µì‚¬</button>
        </div>
    </div>

    <div id="gameBoard" class="game-board"></div>
    
    <div class="footer-action" id="pokerAction" style="display:none;">
        <button class="analyze-btn" onclick="determineWinner()">Who is winner?</button>
        <div class="winner-display-box" id="winnerDisplayBox">
            <span id="winnerResultFullText"></span>
            <button class="copy-btn" style="padding: 12px 30px; font-size: 1em; margin-top:10px;" onclick="copyWinner()">ê²°ê³¼ ë³µì‚¬í•˜ê¸°</button>
        </div>
    </div>
</div>

<script>
    let currentGame = 'HI-LO';
    let players = [];
    let currentDeck = [];
    let winnerId = null;
    let pokerRoundIdx = -1;
    let winnerTextMemory = "";
    const ANTEE = 50;
    const POKER_LAYOUT = [1, 2, 1, 1];

    const suits = ['â™ ', 'â—†', 'â™¥', 'â™£'];
    const rankValues = {'2':2,'3':3,'4':4,'5':5,'6':6,'7':7,'8':8,'9':9,'10':10,'J':11,'Q':12,'K':13,'A':14};
    const suitValues = {'â™ ':4, 'â—†':3, 'â™¥':2, 'â™£':1};

    window.onload = () => {
        currentGame = localStorage.getItem('currentGame') || 'HI-LO';
        loadState();
        updateUI();
    };

    function setGame(gameName) {
        saveState();
        currentGame = gameName;
        localStorage.setItem('currentGame', gameName);
        loadState();
        updateUI();
    }

    function initPlayers() {
        const count = document.getElementById('playerCount').value;
        players = Array.from({length: count}, (_, i) => ({
            id: i + 1, name: `PLAYER ${i + 1}`,
            cards: [], pokerRounds: [[],[],[],[]], pokerFolds: [false, false, false, false],
            pokerBets: [0, 0, 0, 0]
        }));
        currentDeck = []; winnerId = null; pokerRoundIdx = -1; winnerTextMemory = "";
        saveState(); renderBoard();
    }

    function clearTable() {
        players.forEach((p, i) => {
            p.cards = [];
            p.pokerRounds = [[],[],[],[]];
            p.pokerFolds = [false, false, false, false];
            p.pokerBets = [0, 0, 0, 0];
            // ì˜¤ì§ í¬ì»¤ ê²Œì„ì¼ ë•Œë§Œ ì´ë¦„ ì´ˆê¸°í™”
            if (currentGame === 'POKER') {
                p.name = `PLAYER ${i + 1}`;
            }
        });
        currentDeck = []; winnerId = null; pokerRoundIdx = -1; winnerTextMemory = "";
        saveState(); updateUI();
    }

    function updateUI() {
        let titleName = currentGame.replace('HI-LO', 'HIGH AND LOW').replace('-', ' ');
        document.getElementById('displayGameName').innerText = titleName;
        
        document.querySelectorAll('.btn-game').forEach(b => b.classList.remove('active'));
        document.getElementById(`btn-${currentGame}`).classList.add('active');
        
        const isPoker = (currentGame === 'POKER');
        document.getElementById('pokerSettleBtn').style.display = isPoker ? 'inline-block' : 'none';
        document.getElementById('pokerAction').style.display = isPoker ? 'block' : 'none';
        document.getElementById('pokerQuickCopy').style.display = isPoker ? 'grid' : 'none';
        
        document.getElementById('playerCount').value = players.length;
        
        const winBox = document.getElementById('winnerDisplayBox');
        if (isPoker && winnerTextMemory) {
            document.getElementById('winnerResultFullText').innerText = winnerTextMemory;
            winBox.style.display = 'flex';
        } else {
            winBox.style.display = 'none';
        }
        renderBoard();
    }

    function copyPhrase(id) {
        const text = document.getElementById(id).innerText;
        navigator.clipboard.writeText(text);
    }

    function createShuffledDeck() {
        let deck = [];
        const ranks = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
        suits.forEach(s => ranks.forEach(r => deck.push({ suit: s, rank: r, isRed: (s === 'â™¥' || s === 'â—†') })));
        for (let i = deck.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [deck[i], deck[j]] = [deck[j], deck[i]];
        }
        return deck;
    }

    function dealCards() {
        winnerId = null; pokerRoundIdx = -1; winnerTextMemory = "";
        document.getElementById('winnerDisplayBox').style.display = 'none';
        currentDeck = createShuffledDeck();
        if (currentGame === 'POKER') {
            players.forEach(p => {
                p.pokerRounds = [[],[],[],[]];
                p.pokerFolds = [false, false, false, false];
                p.pokerBets = [0, 0, 0, 0];
            });
            settlePokerCards();
        } else {
            const count = (currentGame === 'RED-DOG') ? 3 : 2;
            players.forEach(p => {
                p.cards = [];
                for (let i = 0; i < count; i++) { if(currentDeck.length > 0) p.cards.push(currentDeck.shift()); }
            });
            saveState(); renderBoard();
        }
    }

    function settlePokerCards() {
        if (currentGame !== 'POKER' || currentDeck.length === 0 || pokerRoundIdx >= 3) return;
        pokerRoundIdx++;
        const cardsToGive = POKER_LAYOUT[pokerRoundIdx];
        players.forEach(p => {
            for (let i = 0; i < cardsToGive; i++) {
                if (currentDeck.length > 0) {
                    let card = currentDeck.shift();
                    if (!p.pokerFolds[pokerRoundIdx]) p.pokerRounds[pokerRoundIdx].push(card);
                }
            }
        });
        saveState(); renderBoard();
    }

    function determineWinner() {
        let roundMaxBets = [0, 0, 0, 0];
        for(let r = 0; r < 4; r++) {
            let max = 0;
            players.forEach(p => { if(p.pokerBets[r] > max) max = p.pokerBets[r]; });
            roundMaxBets[r] = max;
        }
        let totalPot = 0;
        let playerLosses = [];
        players.forEach((p, idx) => {
            let spent = ANTEE;
            for(let r = 0; r < 4; r++) {
                if (roundMaxBets[r] > 0) {
                    if (!p.pokerFolds[r]) { spent += roundMaxBets[r]; } 
                    else { break; }
                } else { if (p.pokerFolds[r]) break; }
            }
            totalPot += spent;
            playerLosses.push({ name: p.name, amount: spent });
        });
        let candidates = [];
        players.forEach((p, idx) => {
            if (!p.pokerFolds[3]) {
                let allCards = p.pokerRounds.flat();
                if(allCards.length > 0) {
                    candidates.push({ idx: idx, hand: analyzeHand(allCards), name: p.name, spent: playerLosses[idx].amount });
                }
            }
        });
        if (candidates.length === 0) return alert("ìµœì¢… ìƒì¡´ìê°€ ì—†ìŠµë‹ˆë‹¤.");
        candidates.sort((a, b) => (b.hand.score - a.hand.score) || (b.hand.highRank - a.hand.highRank) || (b.hand.highSuit - a.hand.highSuit));
        
        winnerId = candidates[0].idx;
        const winnerFinalProfit = totalPot - candidates[0].spent;
        const handName = candidates[0].hand.name;
        
        let lossTexts = [];
        playerLosses.forEach((l, idx) => {
            if (idx !== winnerId) { lossTexts.push(`${l.name}ì€ ${l.amount.toLocaleString()} ì¹©`); }
        });
        winnerTextMemory = `${candidates[0].name} ğ–ğˆğ! (${handName}) ${winnerFinalProfit.toLocaleString()} ì¹© ì¶”ê°€í•´ ì£¼ì„¸ìš”.\n${lossTexts.join(', ')}ì„ ê°ê° ì°¨ê°í•´ ì£¼ì„¸ìš”.`;
        document.getElementById('winnerResultFullText').innerText = winnerTextMemory;
        document.getElementById('winnerDisplayBox').style.display = 'flex';
        saveState(); renderBoard();
    }

    function saveState() {
        const data = { players, currentDeck, winnerId, pokerRoundIdx, winnerTextMemory };
        localStorage.setItem(`state-${currentGame}`, JSON.stringify(data));
    }

    function loadState() {
        const saved = localStorage.getItem(`state-${currentGame}`);
        if (saved) {
            const parse = JSON.parse(saved);
            players = parse.players;
            currentDeck = parse.currentDeck;
            winnerId = parse.winnerId;
            pokerRoundIdx = parse.pokerRoundIdx;
            winnerTextMemory = parse.winnerTextMemory || "";
        } else { initPlayers(); }
    }

    function copyWinner() { 
        navigator.clipboard.writeText(winnerTextMemory);
    }
    
    function toggleRoundFold(pIdx, rIdx) {
        const state = !players[pIdx].pokerFolds[rIdx];
        for(let i = rIdx; i < 4; i++) { players[pIdx].pokerFolds[i] = state; }
        saveState(); renderBoard();
    }
    function updateBet(pIdx, rIdx, val) { players[pIdx].pokerBets[rIdx] = parseInt(val) || 0; saveState(); }
    function updateName(idx, name) { players[idx].name = name; saveState(); }
    function copyText(id) { 
        navigator.clipboard.writeText(document.getElementById(id).innerText);
    }
    function createCardHTML(c) { return `<div class="card ${c.isRed?'red':''}"><div class="card-rank">${c.rank}</div><div class="card-suit">${c.suit}</div></div>`; }

    function analyzeHand(cards) {
        let sMap = {}, rMap = {}, rVals = [];
        cards.forEach(c => {
            let v = rankValues[c.rank]; rVals.push(v);
            rMap[v] = (rMap[v] || 0) + 1; sMap[c.suit] = (sMap[c.suit] || 0) + 1;
        });
        rVals.sort((a, b) => b - a);
        let uniqueRanks = [...new Set(rVals)].sort((a, b) => b - a);
        let flushSuit = Object.keys(sMap).find(s => sMap[s] >= 5);
        let isFlush = !!flushSuit;
        let isStraight = false, straightHigh = 0;
        for (let i = 0; i <= uniqueRanks.length - 5; i++) {
            if (uniqueRanks[i] - uniqueRanks[i+4] === 4) { isStraight = true; straightHigh = uniqueRanks[i]; break; }
        }
        if (!isStraight && [14, 5, 4, 3, 2].every(v => rMap[v])) { isStraight = true; straightHigh = 5; }
        if (isFlush && isStraight) return { score: 10, name: "ìŠ¤íŠ¸ë ˆì´íŠ¸ í”ŒëŸ¬ì‰¬", highRank: straightHigh, highSuit: suitValues[flushSuit] };
        let counts = Object.values(rMap).sort((a, b) => b - a);
        if (counts[0] === 4) return { score: 9, name: "í¬ì¹´ë“œ", highRank: parseInt(Object.keys(rMap).find(k => rMap[k] === 4)), highSuit: 4 };
        if (counts[0] === 3 && counts[1] >= 2) return { score: 8, name: "í’€í•˜ìš°ìŠ¤", highRank: parseInt(Object.keys(rMap).find(k => rMap[k] === 3)), highSuit: 4 };
        if (isFlush) return { score: 7, name: "í”ŒëŸ¬ì‰¬", highRank: rVals[0], highSuit: suitValues[flushSuit] };
        if (isStraight) return { score: 4, name: "ìŠ¤íŠ¸ë ˆì´íŠ¸", highRank: straightHigh, highSuit: 4 };
        if (counts[0] === 3) return { score: 3, name: "íŠ¸ë¦¬í”Œ", highRank: parseInt(Object.keys(rMap).find(k => rMap[k] === 3)), highSuit: 4 };
        let pairs = Object.keys(rMap).filter(k => rMap[k] === 2).map(Number).sort((a, b) => b - a);
        if (pairs.length >= 2) return { score: 2, name: "íˆ¬ í˜ì–´", highRank: pairs[0], highSuit: 4 };
        if (pairs.length === 1) return { score: 1, name: "ì› í˜ì–´", highRank: pairs[0], highSuit: 4 };
        return { score: 0, name: "í•˜ì´ ì¹´ë“œ", highRank: rVals[0], highSuit: suitValues[cards.find(c => rankValues[c.rank] === rVals[0]).suit] };
    }

    function renderBoard() {
        const board = document.getElementById('gameBoard'); board.innerHTML = '';
        players.forEach((p, pIdx) => {
            const slot = document.createElement('div');
            slot.className = `player-slot ${winnerId === pIdx ? 'winner-slot' : ''}`;
            let content = (currentGame === 'POKER') 
                ? `<div class="player-header"><input type="text" class="poker-name-input" value="${p.name}" onchange="updateName(${pIdx}, this.value)"></div>`
                : `<div class="player-header">PLAYER ${p.id}</div>`;

            if (currentGame === 'POKER') {
                p.pokerRounds.forEach((cards, rIdx) => {
                    const isFolded = p.pokerFolds[rIdx];
                    const roundCardText = cards.map(c => `${c.rank} ${c.suit}`).join(', ');
                    const copyVal = `ğ‘ğğ”ğğƒ ${rIdx+1} ğ‚ğ€ğ‘ğƒ ğğğ„ğâ€¦â€¦. ${roundCardText}`;
                    
                    content += `<div class="round-container ${isFolded ? 'folded' : ''}">
                        <div class="round-header"><span class="round-label">ROUND ${rIdx+1}</span>
                            <div class="bet-input-area">RAISE: <input type="number" class="bet-input" value="${p.pokerBets[rIdx]}" onchange="updateBet(${pIdx}, ${rIdx}, this.value)">
                            <label style="margin-left:10px;">FOLD <input type="checkbox" ${isFolded ? 'checked' : ''} onchange="toggleRoundFold(${pIdx}, ${rIdx})"></label></div>
                        </div>
                        <div class="card-display">${(cards||[]).map(createCardHTML).join('')}</div>`;
                    
                    if(cards.length > 0 && !isFolded) {
                        content += `<div class="copy-section">
                            <div class="result-text" id="p${pIdx}r${rIdx}">${copyVal}</div>
                            <button class="copy-btn" onclick="copyText('p${pIdx}r${rIdx}')">ë³µì‚¬</button>
                        </div>`;
                    }
                    content += `</div>`;
                });
            } else if (currentGame === 'HI-LO' && p.cards.length >= 2) {
                const c1 = p.cards[0], c2 = p.cards[1], gv = (r) => (r==='A'?1:(['J','Q','K'].includes(r)?10:parseInt(r)));
                let win = gv(c1.rank) === gv(c2.rank) ? "ë‘ ì¹´ë“œì˜ ìˆ˜ê°€ ë™ì¼í•˜ë¯€ë¡œ ë² íŒ…ê¸ˆì„ ë°˜í™˜í•©ë‹ˆë‹¤. ğğ”ğ’ğ‡." : (gv(c1.rank) > gv(c2.rank) ? "ğğ‹ğ€ğ˜ğ„ğ‘ ğ–ğˆğ." : "ğƒğ„ğ€ğ‹ğ„ğ‘ ğ–ğˆğ.");
                content += `<div class="card-display">${createCardHTML(c1)}${createCardHTML(c2)}</div><div class="copy-section"><div class="result-text" id="h${pIdx}">ğ‚ğ€ğ‘ğƒ ğğğ„ğâ€¦â€¦. \nğğ‹ğ€ğ˜ğ„ğ‘: ${c1.rank} ${c1.suit}\nğƒğ„ğ€ğ‹ğ„ğ‘: ${c2.rank} ${c2.suit}\n${win}</div><button class="copy-btn" onclick="copyText('h${pIdx}')">ë³µì‚¬</button></div>`;
            } else if (currentGame === 'RED-DOG' && p.cards.length >= 3) {
                const c1 = p.cards[0], c2 = p.cards[1], c3 = p.cards[2], gv = (r) => (r==='A'?1:(['J','Q','K'].includes(r)?10:parseInt(r))), diff = Math.abs(gv(c1.rank) - gv(c2.rank));
                let res = `ğ‚ğ€ğ‘ğƒ ğğğ„ğâ€¦â€¦. ${c1.rank} ${c1.suit}, ${c2.rank} ${c2.suit}\n`;
                if (gv(c1.rank) === gv(c2.rank)) { res += `ìŠ¤í”„ë ˆë“œê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©°, ë§Œì•½ ì„¸ ë²ˆì§¸ì—ë„ ê°™ì€ ìˆ«ìì˜ ì¹´ë“œê°€ ë‚˜ì˜¨ë‹¤ë©´ ë² íŒ…ê¸ˆì˜ 11 ë°°ë¥¼ ì–»ê²Œ ë©ë‹ˆë‹¤.\nğ€ğğ˜ğŒğğ‘ğ„ ğğ„ğ“?`; }
                else if (diff === 1) { res += `ìŠ¤í”„ë ˆë“œê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ê²Œì„ì´ ì¢…ë£Œë˜ë©°, ë² íŒ…ê¸ˆì„ ë°˜í™˜í•©ë‹ˆë‹¤. ğğ”ğ’ğ‡.`; }
                else { res += `ğ’ğğ‘ğ„ğ€ğƒ: ${diff - 1}\nğ€ğğ˜ğŒğğ‘ğ„ ğğ„ğ“?`; }
                content += `<div class="card-display">${createCardHTML(c1)}${createCardHTML(c2)}</div><div class="copy-section"><div class="result-text" id="r${pIdx}f">${res}</div><button class="copy-btn" onclick="copyText('r${pIdx}f')">ë³µì‚¬</button></div>`;
                if(gv(c1.rank) === gv(c2.rank) || diff > 1) {
                    content += `<div class="card-display" style="margin-top:10px;">${createCardHTML(c3)}</div><div class="copy-section"><div class="result-text" id="r${pIdx}l">ğ‹ğ€ğ’ğ“ ğ‚ğ€ğ‘ğƒ ğğğ„ğ, ${c3.rank} ${c3.suit}.</div><button class="copy-btn" onclick="copyText('r${pIdx}l')">ë³µì‚¬</button></div>`;
                }
            }
            slot.innerHTML = content; board.appendChild(slot);
        });
    }
</script>
</body>
</html>
